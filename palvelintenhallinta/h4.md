[Etusivu](http://jyrinsan.github.io/palvelintenhallinta/index.html) 
&emsp;[H1](http://jyrinsan.github.io/palvelintenhallinta/h1.html)
&emsp;[H2](http://jyrinsan.github.io/palvelintenhallinta/h2.html)
&emsp;[H3](http://jyrinsan.github.io/palvelintenhallinta/h3.html)
&emsp;H4
&emsp;[H5](http://jyrinsan.github.io/palvelintenhallinta/h5.html)
&emsp;[H6](http://jyrinsan.github.io/palvelintenhallinta/h6.html)
&emsp;[H7](http://jyrinsan.github.io/palvelintenhallinta/h7.html)


# Harjoitus 4 - Aikajana

```
Nimi              Sanna Jyrinki
Oppilaitos        Haaga-Helian ammattikorkeakoulu
Kurssi            Palvelinten hallinta ICT4TN022-3015
Opettaja          Tero Karvinen
Tietokoneena      AMD Ryzen 5 PRO 4650U with Radeon Graphics 2.10 GHz
Käyttöjärjestelmä Windows 11 Pro, Versio 21H2
Linux             Oracle Virtual Box 6.1, Debian 11.3
```

## Tehtävä a, Captain obvious

Asensin seuraavat ohjelmat:
- micro: tekstieditori
- gedit: tekstieditori
- tree: näyttää hakemistorakenteen selkeänä puurakenteena
- git: versionhallinta
- default-jdk: java ynpäristöstö
- thunderbird: sähköpostiohjelma
- vlc: musiikkisoitin
- curl: komentoriviltä kutsu esim. http-rajapintaan, hyödyllinen testauksessa
- gimp, grafiikkaohjelma
- nodejs, react ja nodejs tekniikoilla koodaus
- vim, yksinkertainen legendaarinen editori

Ensin testasin jokaisen ohjelman asennuksen manuaalisesti, esim. 'sudo apt-get -y install micro' ja sitten kirjoitin sls tiedoston /srv/salt/sannanapit/init.sls:

<pre><font color="#55FF55"><b>sanna@sanna-virtualbox</b></font>:<font color="#5555FF"><b>/srv/salt/sannanapit</b></font>$ cat init.sls 
appikset:
  pkg.installed:
    - pkgs:
      - micro
      - git
      - tree
      - default-jdk
      - thunderbird
      - vlc
      - curl
      - gimp
      - nodejs
      - vim
</pre>      

Ennen salt-tilan ajamista poistin sovellukset, esim. 'sudo apt-get purge micro'. Tämän jälkeen ajoin salt-tilan, joka asensi ohjelmat uudelleen:

<pre><font color="#55FF55"><b>sanna@sanna-virtualbox</b></font>:<font color="#5555FF"><b>/srv/salt</b></font>$ sudo salt &apos;*&apos; state.apply sannanapit
<font color="#00AA00">orja:</font>
<font color="#00AAAA">----------</font>
    <font color="#00AAAA">      ID: appikset</font>
    <font color="#00AAAA">Function: pkg.installed</font>
    <font color="#00AAAA">  Result: True</font>
    <font color="#00AAAA"> Comment: 10 targeted packages were installed/updated.</font>
    <font color="#00AAAA"> Started: 10:53:16.613134</font>
    <font color="#00AAAA">Duration: 11269.931 ms</font>
<font color="#00AAAA">     Changes:   </font>
<font color="#00AAAA">              ----------</font>
              <font color="#00AAAA">curl</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">7.74.0-1.3+deb11u1</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">default-jdk</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">2:1.11-72</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">gimp</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">2.10.22-4</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">git</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">1:2.30.2-1</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">micro</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">2.0.8-1+b6</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">nodejs</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">12.22.5~dfsg-2~11u1</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">thunderbird</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">1:91.8.0-1~deb11u1</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">tree</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">1.8.0-1+b1</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">vim</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">2:8.2.2434-3+deb11u1</font>
                  <font color="#00AAAA">old</font>:
              <font color="#00AAAA">vlc</font>:
                  <font color="#00AAAA">----------</font>
                  <font color="#00AAAA">new</font>:
                      <font color="#00AA00">3.0.16-1</font>
                  <font color="#00AAAA">old</font>:

<font color="#00AAAA">Summary for orja</font>
<font color="#00AAAA">------------</font>
<font color="#00AA00">Succeeded: 1</font> (<font color="#00AA00">changed=1</font>)
<font color="#00AAAA">Failed:    0</font>
<font color="#00AAAA">------------</font>
<font color="#00AAAA">Total states run:     1</font>
<font color="#00AAAA">Total run time:  11.270 s</font>
</pre>

Testasin ohjelmia, esimerkiksi gimp:
![Image](h4_images/h4_1.PNG)

## Tehtävä b, CSI Pasila

Tiedostoista saa aikajanan 'cd /etc/; sudo find -printf '%T+ %p\n'|sort|tail'.

Anna esimerkki aikajanasta
Selitä jokainen kohta komennosta, jolla aikajana tehdään. Vinkki: '%T+' löytyy 'man find' kohdasta printf.
Aja jokin komento, joka muuttaa järjestelmän yhteisiä asetustiedostoja
Ota uusi aikajana ja etsi muutos sieltä
Onko samalla hetkellä muutettu yhtä vai useampaa tiedostoa?


## Tehtävä c, Tiedän mitä teit viime kesän^H^H^H komennolla

Säädä jotain ohjelmaa ja etsi sen muuttamat tiedostot aikajanasta. Tee sitten tästä oma Saltin tila.

Vinkki: tässä kohdassa pitää muuttaa jonkin ohjelman asetuksia, pelkkä ohjelman asennus pkg.installed on liian helppoa.

## Tehtävä d, Asenna jokin toinen ohjelma asetuksineen

Vinkki: tässäkin kohdassa edellytetään asetusten muuttamista. Jos haluat, voit valita erilaisen ohjelman kuin c-kohdassa. Esimerkiksi jos asensit c-kohdassa demonin, voit asentaa tässä komentoriviohjelman tai graafisen käyttöliittymän ohjelman.